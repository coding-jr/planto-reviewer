{"version":3,"file":"context.js","names":["Equal","dual","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","EffectPrototype","effectVariance","option","TagTypeId","Symbol","for","STMSymbolKey","STMTypeId","TagProto","_tag","_op","_Service","_","_Identifier","toString","_id","key","stack","of","self","context","make","makeGenericTag","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","get","Tag","id","TagClass","setPrototypeOf","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","has","equals","number","pipe","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","isTag","_empty","Map","empty","service","add","set","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"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"}